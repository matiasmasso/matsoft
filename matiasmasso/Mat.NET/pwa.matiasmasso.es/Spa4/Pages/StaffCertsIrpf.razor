@page "/Staff/CertsIrpf/{Guid:Guid}"
@inherits _PageBase


<div class="Wrapper">
    <h1>@base.Lang.Tradueix("Certificados Irp","Certificats Irpf","Irpf certificates")</h1>


    @if (model == null)
    {
        <div>
            <img src="/img/Spinner-24.gif" alt="loading..." />
        </div>
    }
    else
    {
                <div class="Summary">
            @string.Format("S'han trobat {0} certificats",model.Count())
        </div>

        <div class="Grid">
            @if (model != null)
            {
@*                foreach (var item in model.Where(x => x.Matches(searchTerm) && x.FchTo == null))
                {
                    <a href=@("/repmenu/"+item.Guid.ToString()) class='Item'>
                        <div class="Abr Truncate">@item.Abr</div>
                        <div class="Description Truncate">@item.Description</div>
                        <div class="Age">@(string.Format("{0:dd/MM/yy}",item.FchFrom))</div>
                    </a>
                }
*@            }
            else
            {
                <div>loading...</div>
            }
        </div>
    }

</div>




@code {
        [Parameter] public Guid Guid { get; set; }

    private List<RepModel>? model;
    private string searchTerm = string.Empty;

    protected async override Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            model = await base.GetAsync<List<RepModel>>("Reps", ((int)EmpDTO.Ids.MatiasMasso).ToString());
            StateHasChanged();
        };
        await base.OnAfterRenderAsync(firstRender);
    }



}
