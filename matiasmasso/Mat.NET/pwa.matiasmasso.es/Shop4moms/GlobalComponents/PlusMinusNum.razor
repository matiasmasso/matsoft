@using DTO.Helpers

<div class="Wrapper">
    <a href="#" class="Btn Decrement" @onclick="Decrement" @onclick:preventDefault> - </a>

    <div class="Value">@string.Format("{0:N0}",_value)</div>

    <a href="#" class="Btn Increment" @onclick="Increment" @onclick:preventDefault> + </a>
</div>

@code {
    [Parameter] public int Value { get; set; }
    [Parameter] public int Min { get; set; } = 0;
    [Parameter] public object? Tag { get; set; }
    [Parameter] public EventCallback<MatEventArgs<int,object>> ValueChanged { get; set; }
    [Parameter] public bool CanEdit { get; set; } = true;

    private int _value = 0;
    private object? _tag = null;

    protected override void OnParametersSet()
    {
        _value = Value;
        _tag = Tag;
    }

    void Increment()
    {
        if (CanEdit)
        {
            
        _value += 1;
        var args = new MatEventArgs<int, object>(_value, _tag);
        ValueChanged.InvokeAsync(args);
        }
    }

    void Decrement()
    {
        if (CanEdit && _value > Min)
        {
            _value -= 1;
            var args = new MatEventArgs<int, object>(_value, _tag);
            ValueChanged.InvokeAsync(args);
        }
    }

}
