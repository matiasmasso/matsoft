<h3>Rol</h3>

<div>
    <div class="mb-3">
        <label class="form-label">Name</label>
        <input class="form-control" @bind="model?.Name" />
    </div>

 
    <div class="buttons-bar">
        <button class="btn btn-secondary" @onclick="Cancel">
            Cancel
        </button>
        <button class="btn btn-sm btn-danger" @onclick="Delete">
            Elimina
        </button>
        <button class="btn btn-success me-2" @onclick="Save">
            Desa
        </button>
    </div>
</div>
<Error Errors="_errors" OnClear="HandleClear" />

@code {
    [Parameter] public RoleDto? Value { get; set; }
    [Parameter] public EventCallback<RoleDto> UpdateRequest { get; set; }
    [Parameter] public EventCallback<RoleDto> DeleteRequest { get; set; }
    [Parameter] public EventCallback CancelRequest { get; set; }

    private RoleDto? model;
    private List<string>? _errors;

    protected override void OnParametersSet()
    {
        if (Value != null)
        {
            // Create a copy to avoid modifying the parent component's data until saved
            model = new RoleDto
            {
                Id = Value.Id,
                Name = Value.Name
            };
        }
        else
        {
            model = null;
        }
    }
    private async Task Save()
    {
        if (model != null)
        {
            await UpdateRequest.InvokeAsync(model);
        }
    }

    private async Task Delete()
    {
        if (model != null)
        {
            await DeleteRequest.InvokeAsync(model);
        }
    }

    private async Task Cancel()
    {

        await CancelRequest.InvokeAsync();
    }

    private async Task HandleClear()
    {
        _errors?.Clear();
        await InvokeAsync(StateHasChanged);
    }
}
