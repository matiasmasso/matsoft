@page "/forgot-password"
@inject HttpClient Http
@inject NavigationManager NavigationManager

<h3>Forgot Password</h3>

<input @bind="email" placeholder="Email" />
<button @onclick="SendReset">Send Reset Link</button>

<Error Errors="_errors" OnClear="HandleClear" />

@code {
    private string email = "";
    private List<string> _errors = new();

    private async Task SendReset()
    {
        var request = new
        {
            Email = email,
            ResetUrl = NavigationManager.BaseUri + "reset-password"
        };

        await Http.PostAsJsonAsync("auth/forgot-password", request);
    }

    private async Task HandleClear()
    {
        _errors?.Clear();
        await InvokeAsync(StateHasChanged);
    }
}
