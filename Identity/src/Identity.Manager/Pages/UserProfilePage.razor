@page "/profile"
@using Identity.Manager.Services
@inject UserInfoService UserInfoService

<h3>User Profile</h3>

@if (user == null)
{
    <p>Loading...</p>
}
else if (!user.IsAuthenticated)
{
    <p>You are not logged in.</p>
}
else
{
    <div>
        <p><strong>Name:</strong> @user.Name</p>

        @if (user.Roles?.Any() ?? false)
        {
            <p><strong>Roles:</strong> @string.Join(", ", user.Roles)</p>
        }

        <h4>Claims</h4>
        <ul>
            @foreach (var claim in user.Claims!)
            {
                <li><strong>@claim.Type:</strong> @claim.Value</li>
            }
        </ul>
    </div>
}

@code {
    private UserInfo? user;

    protected override async Task OnInitializedAsync()
    {
        user = await UserInfoService.GetUserInfoAsync();
    }
}